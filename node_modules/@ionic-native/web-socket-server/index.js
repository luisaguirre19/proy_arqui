var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
import { IonicNativePlugin, cordova } from '@ionic-native/core';
import { Observable } from 'rxjs';
var WebSocketServerOriginal = /** @class */ (function (_super) {
    __extends(WebSocketServerOriginal, _super);
    function WebSocketServerOriginal() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WebSocketServerOriginal.prototype.getInterfaces = function () { return cordova(this, "getInterfaces", {}, arguments); };
    WebSocketServerOriginal.prototype.start = function (port, options) { return cordova(this, "start", { "observable": true, "clearFunction": "stop" }, arguments); };
    WebSocketServerOriginal.prototype.onFunctionToObservable = function (fnName) {
        return new Observable(function (observer) {
            var id = window.cordova.plugins.wsserver[fnName](observer.next.bind(observer), observer.error.bind(observer));
            return function () { return window.cordova.plugins.wsserver.removeCallback(id); };
        });
    };
    /**
     * Watches for new messages
     * @return {Observable<WebSocketMessage>}
     */
    WebSocketServerOriginal.prototype.watchMessage = function () {
        return this.onFunctionToObservable('onMessage');
    };
    /**
     * Watches for new opened connections
     * @return {Observable<WebSocketConnection>}
     */
    WebSocketServerOriginal.prototype.watchOpen = function () {
        return this.onFunctionToObservable('onOpen');
    };
    /**
     * Watches for closed connections
     * @return {Observable<WebSocketClose>}
     */
    WebSocketServerOriginal.prototype.watchClose = function () {
        return this.onFunctionToObservable('onClose');
    };
    /**
     * Watches for any websocket failures
     * @return {Observable<WebSocketFailure>}
     */
    WebSocketServerOriginal.prototype.watchFailure = function () {
        return this.onFunctionToObservable('onFailure');
    };
    WebSocketServerOriginal.prototype.stop = function () { return cordova(this, "stop", {}, arguments); };
    WebSocketServerOriginal.prototype.send = function (conn, msg) { return cordova(this, "send", {}, arguments); };
    WebSocketServerOriginal.prototype.close = function (conn, code, reason) { return cordova(this, "close", {}, arguments); };
    WebSocketServerOriginal.pluginName = "WebSocketServer";
    WebSocketServerOriginal.plugin = "cordova-plugin-websocket-server";
    WebSocketServerOriginal.pluginRef = "cordova.plugins.wsserver";
    WebSocketServerOriginal.repo = "https://github.com/becvert/cordova-plugin-websocket-server";
    WebSocketServerOriginal.platforms = ["Android", "iOS"];
    return WebSocketServerOriginal;
}(IonicNativePlugin));
var WebSocketServer = new WebSocketServerOriginal();
export { WebSocketServer };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvQGlvbmljLW5hdGl2ZS9wbHVnaW5zL3dlYi1zb2NrZXQtc2VydmVyL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFDQSxPQUFPLDhCQUFzQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7O0lBNEdHLG1DQUFpQjs7OztJQU1wRCx1Q0FBYTtJQWNiLCtCQUFLLGFBQUMsSUFBWSxFQUFFLE9BQXlCO0lBSXJDLGdEQUFzQixHQUE5QixVQUFrQyxNQUFjO1FBQzlDLE9BQU8sSUFBSSxVQUFVLENBQUksVUFBQSxRQUFRO1lBQy9CLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBRWhILE9BQU8sY0FBTSxPQUFBLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLEVBQWxELENBQWtELENBQUM7UUFDbEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsc0NBQVksR0FBWjtRQUNFLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFRDs7O09BR0c7SUFDSCxtQ0FBUyxHQUFUO1FBQ0UsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVEOzs7T0FHRztJQUNILG9DQUFVLEdBQVY7UUFDRSxPQUFPLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsc0NBQVksR0FBWjtRQUNFLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFPRCw4QkFBSTtJQVdKLDhCQUFJLGFBQUMsSUFBeUIsRUFBRSxHQUFXO0lBWTNDLCtCQUFLLGFBQUMsSUFBeUIsRUFBRSxJQUFZLEVBQUUsTUFBYzs7Ozs7OzBCQTFNL0Q7RUE4R3FDLGlCQUFpQjtTQUF6QyxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUGx1Z2luLCBDb3Jkb3ZhLCBJb25pY05hdGl2ZVBsdWdpbiB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbmRlY2xhcmUgY29uc3Qgd2luZG93OiBhbnk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0SW50ZXJmYWNlcyB7XG4gIFtrZXk6IHN0cmluZ106IFdlYlNvY2tldEludGVyZmFjZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRJbnRlcmZhY2Uge1xuICBpcHY0QWRkcmVzc2VzOiBzdHJpbmdbXTtcbiAgaXB2NkFkZHJlc3Nlczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0T3B0aW9ucyB7XG4gIG9yaWdpbnM/OiBzdHJpbmdbXTtcbiAgcHJvdG9jb2xzPzogc3RyaW5nW107XG4gIHRjcE5vRGVsYXk/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYlNvY2tldElkZW50aWZpZXIge1xuICB1dWlkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0U2VydmVyRGV0YWlscyB7XG4gIGFkZHI6IHN0cmluZztcbiAgcG9ydDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYlNvY2tldEZhaWx1cmUgZXh0ZW5kcyBXZWJTb2NrZXRTZXJ2ZXJEZXRhaWxzIHtcbiAgcmVhc29uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0TWVzc2FnZSB7XG4gIGNvbm46IFdlYlNvY2tldENvbm5lY3Rpb247XG4gIG1zZzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYlNvY2tldENsb3NlIHtcbiAgY29ubjogV2ViU29ja2V0Q29ubmVjdGlvbjtcbiAgY29kZTogbnVtYmVyO1xuICByZWFzb246IHN0cmluZztcbiAgd2FzQ2xlYW46IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0Q29ubmVjdGlvbiBleHRlbmRzIFdlYlNvY2tldElkZW50aWZpZXIge1xuICByZW1vdGVBdHRyOiBzdHJpbmc7XG4gIHN0YXRlOiAnb3BlbicgfCAnY2xvc2VkJztcbiAgaHR0cEZpZWxkczogSHR0cEZpZWxkcztcbiAgcmVzb3VyY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIdHRwRmllbGRzIHtcbiAgJ0FjY2VwdC1FbmNvZGluZyc6IHN0cmluZztcbiAgJ0FjY2VwdC1MYW5ndWFnZSc6IHN0cmluZztcbiAgJ0NhY2hlLUNvbnRyb2wnOiBzdHJpbmc7XG4gIENvbm5lY3Rpb246IHN0cmluZztcbiAgSG9zdDogc3RyaW5nO1xuICBPcmlnaW46IHN0cmluZztcbiAgUHJhZ21hOiBzdHJpbmc7XG4gICdTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMnOiBzdHJpbmc7XG4gICdTZWMtV2ViU29ja2V0LUtleSc6IHN0cmluZztcbiAgJ1NlYy1XZWJTb2NrZXQtVmVyc2lvbic6IHN0cmluZztcbiAgVXBncmFkZTogc3RyaW5nO1xuICAnVXNlci1BZ2VudCc6IHN0cmluZztcbn1cblxuLyoqXG4gKiBAbmFtZSBXZWJTb2NrZXQgU2VydmVyXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgcGx1Z2luIGFsbG93cyB5b3UgdG8gcnVuIGEgc2luZ2xlLCBsaWdodHdlaWdodCwgYmFyZWJvbmUgV2ViU29ja2V0IFNlcnZlci5cbiAqXG4gKiBAdXNhZ2VcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IFdlYlNvY2tldFNlcnZlciB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvd2ViLXNvY2tldC1zZXJ2ZXInO1xuICpcbiAqIGNvbnN0cnVjdG9yKHByaXZhdGUgd3NzZXJ2ZXI6IFdlYlNvY2tldFNlcnZlcikgeyB9XG4gKlxuICogLi4uXG4gKlxuICogLy8gc3RhcnQgd2Vic29ja2V0IHNlcnZlclxuICogdGhpcy53c3NlcnZlci5zdGFydCg4ODg4LCB7fSkuc3Vic2NyaWJlKHtcbiAqICAgbmV4dDogc2VydmVyID0+IGNvbnNvbGUubG9nKGBMaXN0ZW5pbmcgb24gJHtzZXJ2ZXIuYWRkcn06JHtzZXJ2ZXIucG9ydH1gKSxcbiAqICAgZXJyb3I6IGVycm9yID0+IGNvbnNvbGUubG9nKGBVbmV4cGVjdGVkIGVycm9yYCwgZXJyb3IpO1xuICogfSk7XG4gKlxuICogLy8gd2F0Y2ggZm9yIGFueSBtZXNzYWdlc1xuICogdGhpcy53c3NlcnZlci53YXRjaE1lc3NhZ2UoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAqICAgY29uc29sZS5sb2coYFJlY2VpdmVkIG1lc3NhZ2UgJHtyZXN1bHQubXNnfSBmcm9tICR7cmVzdWx0LmNvbm4udXVpZH1gKTtcbiAqIH0pO1xuICpcbiAqIC8vIHNlbmQgbWVzc2FnZSB0byBjb25uZWN0aW9uIHdpdGggc3BlY2lmaWVkIHV1aWRcbiAqIHRoaXMud3NzZXJ2ZXIuc2VuZCh7IHV1aWQ6ICc4ZTdjNGY0OC1kZTY4LTRiNmYtOGZjYS0xMDY3YTM1Mzk2OGQnIH0sICdIZWxsbyBXb3JsZCcpO1xuICpcbiAqIC8vIHN0b3Agd2Vic29ja2V0IHNlcnZlclxuICogdGhpcy53c3NlcnZlci5zdG9wKCkudGhlbihzZXJ2ZXIgPT4ge1xuICogICBjb25zb2xlLmxvZyhgU3RvcCBsaXN0ZW5pbmcgb24gJHtzZXJ2ZXIuYWRkcn06JHtzZXJ2ZXIucG9ydH1gKTtcbiAqIH0pO1xuICpcbiAqIGBgYFxuICovXG5AUGx1Z2luKHtcbiAgcGx1Z2luTmFtZTogJ1dlYlNvY2tldFNlcnZlcicsXG4gIHBsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLXdlYnNvY2tldC1zZXJ2ZXInLFxuICBwbHVnaW5SZWY6ICdjb3Jkb3ZhLnBsdWdpbnMud3NzZXJ2ZXInLFxuICByZXBvOiAnaHR0cHM6Ly9naXRodWIuY29tL2JlY3ZlcnQvY29yZG92YS1wbHVnaW4td2Vic29ja2V0LXNlcnZlcicsXG4gIHBsYXRmb3JtczogWydBbmRyb2lkJywgJ2lPUyddLFxufSlcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRTZXJ2ZXIgZXh0ZW5kcyBJb25pY05hdGl2ZVBsdWdpbiB7XG4gIC8qKlxuICAgKiBSZXR1cm4gdGhpcyBkZXZpY2UncyBpbnRlcmZhY2VzXG4gICAqIEByZXR1cm4ge1Byb21pc2U8V2ViU29ja2V0SW50ZXJmYWNlcz59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldEludGVyZmFjZXMoKTogUHJvbWlzZTxXZWJTb2NrZXRJbnRlcmZhY2VzPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHdlYnNvY2tldCBzZXJ2ZXJcbiAgICogQHBhcmFtIHBvcnQge251bWJlcn0gTG9jYWwgcG9ydCBvbiB3aGljaCB0aGUgc2VydmljZSBydW5zLiAoMCBtZWFucyBhbnkgZnJlZSBwb3J0KVxuICAgKiBAcGFyYW0gb3B0aW9ucyB7V2ViU29ja2V0T3B0aW9uc30gQWRkaXRpb25hbCBvcHRpb25zIGZvciB3ZWJzb2NrZXRcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxXZWJTb2NrZXRTZXJ2ZXJEZXRhaWxzPn0gUmV0dXJucyBPYnNlcnZhYmxlIHdoZXJlIGFsbCBnZW5lcmljIGVycm9yIGNhbiBiZSBjYXRjaGVkIChtb3N0bHkgSlNPTkV4Y2VwdGlvbnMpXG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgb2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBjbGVhckZ1bmN0aW9uOiAnc3RvcCcsXG4gIH0pXG4gIHN0YXJ0KHBvcnQ6IG51bWJlciwgb3B0aW9uczogV2ViU29ja2V0T3B0aW9ucyk6IE9ic2VydmFibGU8V2ViU29ja2V0U2VydmVyRGV0YWlscz4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByaXZhdGUgb25GdW5jdGlvblRvT2JzZXJ2YWJsZTxUPihmbk5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxUPihvYnNlcnZlciA9PiB7XG4gICAgICBjb25zdCBpZCA9IHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMud3NzZXJ2ZXJbZm5OYW1lXShvYnNlcnZlci5uZXh0LmJpbmQob2JzZXJ2ZXIpLCBvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyKSk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB3aW5kb3cuY29yZG92YS5wbHVnaW5zLndzc2VydmVyLnJlbW92ZUNhbGxiYWNrKGlkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYXRjaGVzIGZvciBuZXcgbWVzc2FnZXNcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxXZWJTb2NrZXRNZXNzYWdlPn1cbiAgICovXG4gIHdhdGNoTWVzc2FnZSgpOiBPYnNlcnZhYmxlPFdlYlNvY2tldE1lc3NhZ2U+IHtcbiAgICByZXR1cm4gdGhpcy5vbkZ1bmN0aW9uVG9PYnNlcnZhYmxlKCdvbk1lc3NhZ2UnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYXRjaGVzIGZvciBuZXcgb3BlbmVkIGNvbm5lY3Rpb25zXG4gICAqIEByZXR1cm4ge09ic2VydmFibGU8V2ViU29ja2V0Q29ubmVjdGlvbj59XG4gICAqL1xuICB3YXRjaE9wZW4oKTogT2JzZXJ2YWJsZTxXZWJTb2NrZXRDb25uZWN0aW9uPiB7XG4gICAgcmV0dXJuIHRoaXMub25GdW5jdGlvblRvT2JzZXJ2YWJsZSgnb25PcGVuJyk7XG4gIH1cblxuICAvKipcbiAgICogV2F0Y2hlcyBmb3IgY2xvc2VkIGNvbm5lY3Rpb25zXG4gICAqIEByZXR1cm4ge09ic2VydmFibGU8V2ViU29ja2V0Q2xvc2U+fVxuICAgKi9cbiAgd2F0Y2hDbG9zZSgpOiBPYnNlcnZhYmxlPFdlYlNvY2tldENsb3NlPiB7XG4gICAgcmV0dXJuIHRoaXMub25GdW5jdGlvblRvT2JzZXJ2YWJsZSgnb25DbG9zZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhdGNoZXMgZm9yIGFueSB3ZWJzb2NrZXQgZmFpbHVyZXNcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxXZWJTb2NrZXRGYWlsdXJlPn1cbiAgICovXG4gIHdhdGNoRmFpbHVyZSgpOiBPYnNlcnZhYmxlPFdlYlNvY2tldEZhaWx1cmU+IHtcbiAgICByZXR1cm4gdGhpcy5vbkZ1bmN0aW9uVG9PYnNlcnZhYmxlKCdvbkZhaWx1cmUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHdlYnNvY2tldCBzZXJ2ZXIgYW5kIGNsb3NlcyBhbGwgY29ubmVjdGlvbnNcbiAgICogQHJldHVybiB7UHJvbWlzZTxXZWJTb2NrZXRTZXJ2ZXJEZXRhaWxzPn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc3RvcCgpOiBQcm9taXNlPFdlYlNvY2tldFNlcnZlckRldGFpbHM+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBNZXNzYWdlIHRvIGEgY29ubmVjdGVkIGRldmljZVxuICAgKiBAcGFyYW0gY29ubiB7V2ViU29ja2V0SWRlbnRpZmllcn0gQ29ubmVjdGlvbiB0byBzZW5kIG1lc3NhZ2UgdG9cbiAgICogQHBhcmFtIG1zZyB7c3RyaW5nfSBNZXNzYWdlIHRvIHNlbmRcbiAgICogQHJldHVybiB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc2VuZChjb25uOiBXZWJTb2NrZXRJZGVudGlmaWVyLCBtc2c6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSBzcGVjaWZpYyBjb25uZWN0aW9uIHVzaW5nIHV1aWRcbiAgICogQHBhcmFtIGNvbm4ge1dlYlNvY2tldElkZW50aWZpZXJ9IENvbm5lY3Rpb24gdG8gY2xvc2VcbiAgICogQHBhcmFtIGNvZGUge251bWJlcn0gQ2xvc2UgY29kZSwgZGV0ZXJtaW5lcyBpZiBpdCB3YXMgY2xlYW5cbiAgICogQHBhcmFtIHJlYXNvbiB7c3RyaW5nfSBSZWFzb24gZm9yIGNsb3NpbmdcbiAgICogQHJldHVybiB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgY2xvc2UoY29ubjogV2ViU29ja2V0SWRlbnRpZmllciwgY29kZTogbnVtYmVyLCByZWFzb246IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybjtcbiAgfVxufVxuIl19